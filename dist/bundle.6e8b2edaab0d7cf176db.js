/*! For license information please see bundle.6e8b2edaab0d7cf176db.js.LICENSE.txt */
(()=>{"use strict";var e,n={65:(e,n,t)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(){var e,n,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",i=t.toStringTag||"@@toStringTag";function s(t,r,o,i){var s=r&&r.prototype instanceof l?r:l,u=Object.create(s.prototype);return a(u,"_invoke",function(t,r,o){var a,i,s,l=0,u=o||[],d=!1,p={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(n,t){return a=n,i=0,s=e,p.n=t,c}};function f(t,r){for(i=t,s=r,n=0;!d&&l&&!o&&n<u.length;n++){var o,a=u[n],f=p.p,m=a[2];t>3?(o=m===r)&&(s=a[(i=a[4])?5:(i=3,3)],a[4]=a[5]=e):a[0]<=f&&((o=t<2&&f<a[1])?(i=0,p.v=r,p.n=a[1]):f<m&&(o=t<3||a[0]>r||r>m)&&(a[4]=t,a[5]=r,p.n=m,i=0))}if(o||t>1)return c;throw d=!0,r}return function(o,u,m){if(l>1)throw TypeError("Generator is already running");for(d&&1===u&&f(u,m),i=u,s=m;(n=i<2?e:s)||!d;){a||(i?i<3?(i>1&&(p.n=-1),f(i,s)):p.n=s:p.v=s);try{if(l=2,a){if(i||(o="next"),n=a[o]){if(!(n=n.call(a,s)))throw TypeError("iterator result is not an object");if(!n.done)return n;s=n.value,i<2&&(i=0)}else 1===i&&(n=a.return)&&n.call(a),i<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),i=1);a=e}else if((n=(d=p.n<0)?s:t.call(r,p))!==c)break}catch(n){a=e,i=1,s=n}finally{l=1}}return{value:n,done:d}}}(t,o,i),!0),u}var c={};function l(){}function u(){}function d(){}n=Object.getPrototypeOf;var p=[][r]?n(n([][r]())):(a(n={},r,function(){return this}),n),f=d.prototype=l.prototype=Object.create(p);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,a(e,i,"GeneratorFunction")),e.prototype=Object.create(f),e}return u.prototype=d,a(f,"constructor",d),a(d,"constructor",u),u.displayName="GeneratorFunction",a(d,i,"GeneratorFunction"),a(f),a(f,i,"Generator"),a(f,r,function(){return this}),a(f,"toString",function(){return"[object Generator]"}),(o=function(){return{w:s,m}})()}function a(e,n,t,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}a=function(e,n,t,r){function i(n,t){a(e,n,function(e){return this._invoke(n,t,e)})}n?o?o(e,n,{value:t,enumerable:!r,configurable:!r,writable:!r}):e[n]=t:(i("next",0),i("throw",1),i("return",2))},a(e,n,t,r)}function i(e,n,t,r,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void t(e)}s.done?n(c):Promise.resolve(c).then(r,o)}function s(e){return function(){var n=this,t=arguments;return new Promise(function(r,o){var a=e.apply(n,t);function s(e){i(a,r,o,s,c,"next",e)}function c(e){i(a,r,o,s,c,"throw",e)}s(void 0)})}}function c(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,l(r.key),r)}}function l(e){var n=function(e){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var t=n.call(e,"string");if("object"!=r(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==r(n)?n:n+""}var u=function(){return e=function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.installPrompt=null,this.isOnline=navigator.onLine,this.init()},n=[{key:"init",value:(a=s(o().m(function e(){return o().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.registerServiceWorker();case 1:this.setupInstallPrompt(),this.setupOnlineOfflineHandlers(),this.setupPerformanceMonitoring();case 2:return e.a(2)}},e,this)})),function(){return a.apply(this,arguments)})},{key:"registerServiceWorker",value:(r=s(o().m(function e(){var n,t,r=this;return o().w(function(e){for(;;)switch(e.p=e.n){case 0:if(!("serviceWorker"in navigator)){e.n=4;break}return e.p=1,e.n=2,navigator.serviceWorker.register("/sw.js");case 2:n=e.v,console.log("Service Worker registered successfully:",n),n.addEventListener("updatefound",function(){var e=n.installing;e&&e.addEventListener("statechange",function(){"installed"===e.state&&navigator.serviceWorker.controller&&r.showUpdateAvailable()})}),navigator.serviceWorker.addEventListener("message",function(e){e.data&&"BACK_ONLINE"===e.data.type&&r.handleBackOnline()}),e.n=4;break;case 3:e.p=3,t=e.v,console.error("Service Worker registration failed:",t);case 4:return e.a(2)}},e,null,[[1,3]])})),function(){return r.apply(this,arguments)})},{key:"setupInstallPrompt",value:function(){var e=this;window.addEventListener("beforeinstallprompt",function(n){console.log("PWA: Install prompt available"),n.preventDefault(),e.installPrompt=n,e.showInstallButton()}),window.addEventListener("appinstalled",function(){console.log("PWA: App was installed"),e.hideInstallButton(),e.trackEvent("pwa_installed")})}},{key:"showInstallButton",value:function(){var e=this,n=document.createElement("button");n.id="pwa-install-btn",n.innerHTML='\n      <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">\n        <path d="M19,18H6V6H19M21,4H3A2,2 0 0,0 1,6V18A2,2 0 0,0 3,20H21A2,2 0 0,0 23,18V6A2,2 0 0,0 21,4Z"/>\n        <path d="M12,8L8,12H11V16H13V12H16L12,8Z"/>\n      </svg>\n      Install App\n    ',n.style.cssText="\n      position: fixed;\n      bottom: 20px;\n      right: 20px;\n      background: #2a4df5;\n      color: white;\n      border: none;\n      padding: 12px 16px;\n      border-radius: 8px;\n      cursor: pointer;\n      font-weight: 500;\n      display: flex;\n      align-items: center;\n      gap: 8px;\n      box-shadow: 0 4px 12px rgba(42, 77, 245, 0.3);\n      z-index: 1000;\n      transition: transform 0.2s ease;\n    ",n.addEventListener("mouseenter",function(){n.style.transform="scale(1.05)"}),n.addEventListener("mouseleave",function(){n.style.transform="scale(1)"}),n.addEventListener("click",function(){return e.installPWA()}),this.isPWAInstalled()||document.body.appendChild(n)}},{key:"hideInstallButton",value:function(){var e=document.getElementById("pwa-install-btn");e&&e.remove()}},{key:"installPWA",value:(t=s(o().m(function e(){var n,t;return o().w(function(e){for(;;)switch(e.p=e.n){case 0:if(this.installPrompt){e.n=1;break}return e.a(2);case 1:return e.p=1,e.n=2,this.installPrompt.prompt();case 2:n=e.v,console.log("PWA: Install prompt result:",n.outcome),"accepted"===n.outcome?this.trackEvent("pwa_install_accepted"):this.trackEvent("pwa_install_dismissed"),this.installPrompt=null,this.hideInstallButton(),e.n=4;break;case 3:e.p=3,t=e.v,console.error("PWA: Install failed:",t);case 4:return e.a(2)}},e,this,[[1,3]])})),function(){return t.apply(this,arguments)})},{key:"isPWAInstalled",value:function(){return!(!window.matchMedia||!window.matchMedia("(display-mode: standalone)").matches)||!0===window.navigator.standalone}},{key:"setupOnlineOfflineHandlers",value:function(){var e=this;window.addEventListener("online",function(){console.log("PWA: Back online"),e.isOnline=!0,e.showOnlineStatus(),e.handleBackOnline()}),window.addEventListener("offline",function(){console.log("PWA: Gone offline"),e.isOnline=!1,e.showOfflineStatus()}),this.isOnline||this.showOfflineStatus()}},{key:"showOnlineStatus",value:function(){var e=document.getElementById("connection-status");e&&(e.style.cssText="\n        position: fixed;\n        top: 0;\n        left: 0;\n        right: 0;\n        background: #10b981;\n        color: white;\n        text-align: center;\n        padding: 8px;\n        font-size: 14px;\n        z-index: 1001;\n        transform: translateY(-100%);\n        transition: transform 0.3s ease;\n      ",e.textContent="‚úì Back online",e.style.transform="translateY(0)",setTimeout(function(){e&&(e.style.transform="translateY(-100%)",setTimeout(function(){return e.remove()},300))},3e3))}},{key:"showOfflineStatus",value:function(){var e=document.getElementById("connection-status");e||((e=document.createElement("div")).id="connection-status",document.body.appendChild(e)),e.style.cssText="\n      position: fixed;\n      top: 0;\n      left: 0;\n      right: 0;\n      background: #dc2626;\n      color: white;\n      text-align: center;\n      padding: 8px;\n      font-size: 14px;\n      z-index: 1001;\n    ",e.textContent="‚ö†Ô∏è You are offline. Some features may not work."}},{key:"handleBackOnline",value:function(){window.loadUserWaveforms&&"function"==typeof window.loadUserWaveforms&&window.loadUserWaveforms(),this.showOnlineStatus()}},{key:"showUpdateAvailable",value:function(){var e=document.createElement("div");e.style.cssText="\n      position: fixed;\n      bottom: 0;\n      left: 0;\n      right: 0;\n      background: #2a4df5;\n      color: white;\n      padding: 16px;\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      z-index: 1001;\n    ",e.innerHTML='\n      <span>üöÄ A new version is available!</span>\n      <div>\n        <button id="update-dismiss" style="background: transparent; color: white; border: 1px solid white; padding: 8px 12px; border-radius: 4px; margin-right: 8px; cursor: pointer;">\n          Later\n        </button>\n        <button id="update-reload" style="background: white; color: #2a4df5; border: none; padding: 8px 16px; border-radius: 4px; font-weight: 500; cursor: pointer;">\n          Update Now\n        </button>\n      </div>\n    ',document.body.appendChild(e),document.getElementById("update-dismiss").addEventListener("click",function(){e.remove()}),document.getElementById("update-reload").addEventListener("click",function(){window.location.reload()})}},{key:"setupPerformanceMonitoring",value:function(){var e=this;window.addEventListener("load",function(){if("performance"in window){var n=performance.getEntriesByType("navigation")[0];if(n){var t=n.loadEventEnd-n.loadEventStart;console.log("PWA: Page load time: ".concat(t,"ms")),e.trackPerformance("page_load_time",t)}}});var n=new PerformanceObserver(function(e){e.getEntries().forEach(function(e){e.duration>1e3&&console.warn("PWA: Slow resource: ".concat(e.name," (").concat(e.duration,"ms)"))})});try{n.observe({entryTypes:["resource"]})}catch(e){console.log("PWA: Performance Observer not supported")}}},{key:"trackEvent",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};console.log("PWA Event: ".concat(e),n),"undefined"!=typeof gtag&&gtag("event",e,n)}},{key:"trackPerformance",value:function(e,n){console.log("PWA Performance: ".concat(e," = ").concat(n)),"undefined"!=typeof gtag&&gtag("event","performance",{metric_name:e,metric_value:n})}}],n&&c(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n,t,r,a}();"loading"===document.readyState?document.addEventListener("DOMContentLoaded",function(){new u}):new u;var d=t(517),p=t(223),f=t(532),m={apiKey:void 0,authDomain:void 0,projectId:void 0,storageBucket:void 0,messagingSenderId:void 0,appId:void 0},v=["apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId"].filter(function(e){return!m[e]});v.length>0&&(console.error("Missing Firebase configuration keys:",v),console.log("Please ensure all Firebase environment variables are set in your .env file or build environment"));var g=(0,p.Wp)(m),h=(0,d.xI)(g),y=new d.HF,b=(new d.IX,(0,f.c7)(g));function w(){var e,n,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",o=t.toStringTag||"@@toStringTag";function a(t,r,o,a){var c=r&&r.prototype instanceof s?r:s,l=Object.create(c.prototype);return x(l,"_invoke",function(t,r,o){var a,s,c,l=0,u=o||[],d=!1,p={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(n,t){return a=n,s=0,c=e,p.n=t,i}};function f(t,r){for(s=t,c=r,n=0;!d&&l&&!o&&n<u.length;n++){var o,a=u[n],f=p.p,m=a[2];t>3?(o=m===r)&&(c=a[(s=a[4])?5:(s=3,3)],a[4]=a[5]=e):a[0]<=f&&((o=t<2&&f<a[1])?(s=0,p.v=r,p.n=a[1]):f<m&&(o=t<3||a[0]>r||r>m)&&(a[4]=t,a[5]=r,p.n=m,s=0))}if(o||t>1)return i;throw d=!0,r}return function(o,u,m){if(l>1)throw TypeError("Generator is already running");for(d&&1===u&&f(u,m),s=u,c=m;(n=s<2?e:c)||!d;){a||(s?s<3?(s>1&&(p.n=-1),f(s,c)):p.n=c:p.v=c);try{if(l=2,a){if(s||(o="next"),n=a[o]){if(!(n=n.call(a,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,s<2&&(s=0)}else 1===s&&(n=a.return)&&n.call(a),s<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),s=1);a=e}else if((n=(d=p.n<0)?c:t.call(r,p))!==i)break}catch(n){a=e,s=1,c=n}finally{l=1}}return{value:n,done:d}}}(t,o,a),!0),l}var i={};function s(){}function c(){}function l(){}n=Object.getPrototypeOf;var u=[][r]?n(n([][r]())):(x(n={},r,function(){return this}),n),d=l.prototype=s.prototype=Object.create(u);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,x(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return c.prototype=l,x(d,"constructor",l),x(l,"constructor",c),c.displayName="GeneratorFunction",x(l,o,"GeneratorFunction"),x(d),x(d,o,"Generator"),x(d,r,function(){return this}),x(d,"toString",function(){return"[object Generator]"}),(w=function(){return{w:a,m:p}})()}function x(e,n,t,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}x=function(e,n,t,r){function a(n,t){x(e,n,function(e){return this._invoke(n,t,e)})}n?o?o(e,n,{value:t,enumerable:!r,configurable:!r,writable:!r}):e[n]=t:(a("next",0),a("throw",1),a("return",2))},x(e,n,t,r)}function k(e,n,t,r,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void t(e)}s.done?n(c):Promise.resolve(c).then(r,o)}function E(e){return function(){var n=this,t=arguments;return new Promise(function(r,o){var a=e.apply(n,t);function i(e){k(a,r,o,i,s,"next",e)}function s(e){k(a,r,o,i,s,"throw",e)}i(void 0)})}}var L=null;function P(){return I.apply(this,arguments)}function I(){return I=E(w().m(function e(){var n,t,r,o,a,i,s,c,l,u,d,p,f,m,v,g,h=arguments;return w().w(function(e){for(;;)switch(e.p=e.n){case 0:if(n=h.length>0&&void 0!==h[0]?h[0]:0,t=h.length>1&&void 0!==h[1]&&h[1],L){e.n=1;break}return(r=document.getElementById("waveformsList"))&&r.classList.add("hidden"),e.a(2);case 1:return e.p=1,e.n=2,fetch("get_waveforms.php?user_id=".concat(encodeURIComponent(L.uid),"&offset=").concat(n,"&limit=5"));case 2:if((o=e.v).ok){e.n=3;break}throw new Error("Failed to load waveforms");case 3:return e.n=4,o.json();case 4:if(a=e.v,console.log("üîç Raw waveforms data:",a),Array.isArray(a)?(i=a,s=!1,c=a.length):(i=a.waveforms||[],s=a.has_more||!1,c=a.total||0),console.log("üîç Processed waveforms:",i.length,"items, hasMore:",s,"total:",c),l=document.getElementById("waveformsList"),u=document.getElementById("waveformsContainer"),l&&u){e.n=5;break}return e.a(2);case 5:0===i.length&&0===n?u.innerHTML='<div class="muted" style="text-align: center; padding: 20px;">No MemoryWaves yet. Create your first one above!</div>':i.length>0&&(d=i.map(function(e){var n=e.title||e.original_name||"Untitled",t=new Date(e.created_at).toLocaleDateString(),r=new Date(e.created_at).toLocaleTimeString();return'\n          <div class="waveform-item" style="border: 1px solid #e6e9f2; border-radius: 8px; padding: 12px; margin-bottom: 8px; background: #fafbfc;">\n            <div style="display: flex; justify-content: space-between; align-items: center;">\n              <div>\n                <strong style="color: #0b0d12;">'.concat(n,'</strong>\n                <div class="muted" style="font-size: 12px; margin-top: 2px;">\n                  ').concat(e.original_name," ‚Ä¢ ").concat(t," ").concat(r,'\n                </div>\n              </div>\n              <div style="display: flex; gap: 8px; flex-wrap: wrap;">\n                <button onclick="showMemoryModal(\'').concat(e.image_url,"', '").concat(n.replace(/'/g,"\\'"),"', '").concat(e.qr_url,'\')" class="secondary" style="font-size: 12px; padding: 4px 8px; border: none; cursor: pointer;">View</button>\n                <a href="').concat(e.qr_url,'" target="_blank" class="secondary" style="font-size: 12px; padding: 4px 8px;">QR</a>\n                <button onclick="showOrderOptions(').concat(e.id,", '").concat(e.image_url,"', '").concat(n.replace(/'/g,"\\'"),'\', this)" style="background: #2a4df5; border: none; color: white; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 12px;">Order Print</button>\n                <button onclick="deleteMemory(').concat(e.id,", '").concat(n.replace(/'/g,"\\'"),'\', this)" class="btn-delete" style="background: #dc3545; border: none; color: white; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 12px;">Delete</button>\n              </div>\n            </div>\n          </div>\n        ')}).join(""),t?((p=u.querySelector("#loadMoreBtn"))&&p.remove(),u.insertAdjacentHTML("beforeend",d)):u.innerHTML=d,s&&((f=document.createElement("div")).id="loadMoreBtn",f.style.cssText="text-align: center; margin-top: 16px;",f.innerHTML='\n          <button onclick="loadMoreMemories()" style="background: #6b7280; border: none; color: white; padding: 8px 16px; border-radius: 8px; cursor: pointer; font-weight: 500;">\n            Load More ('.concat(c-n-i.length," remaining)\n          </button>\n        "),u.appendChild(f))),l.classList.remove("hidden"),l.style.display="block",window.currentWaveformsOffset=n+i.length,e.n=7;break;case 6:e.p=6,g=e.v,console.error("Error loading waveforms:",g),m=document.getElementById("waveformsContainer"),v=document.getElementById("waveformsList"),m&&(m.innerHTML='<div class="muted" style="text-align: center; padding: 20px;">Error loading waveforms</div>'),v&&v.classList.remove("hidden");case 7:return e.a(2)}},e,null,[[1,6]])})),I.apply(this,arguments)}var O=function(){return{authModal:document.getElementById("authModal"),mainContent:document.getElementById("mainContent"),userInfo:document.getElementById("userInfo"),btnLogin:document.getElementById("btnLogin"),btnLogout:document.getElementById("btnLogout"),userName:document.getElementById("userName"),userAvatar:document.getElementById("userAvatar"),btnCreate:document.getElementById("btnCreate"),status:document.getElementById("status"),emailInput:document.getElementById("emailInput"),passwordInput:document.getElementById("passwordInput"),btnEmailLogin:document.getElementById("btnEmailLogin"),btnEmailRegister:document.getElementById("btnEmailRegister")}};function C(){return(C=E(w().m(function e(n){var t,r;return w().w(function(e){for(;;)switch(e.n){case 0:return(t=O()).authModal.classList.add("hidden"),t.authModal.style.display="none",t.authModal.style.visibility="hidden",t.mainContent.classList.remove("page-disabled"),t.mainContent.style.filter="none",t.mainContent.style.opacity="1",t.mainContent.style.pointerEvents="auto",t.userInfo.classList.remove("hidden"),t.userName.textContent=n.displayName||n.email,t.userAvatar.src=n.photoURL||'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="%23ccc"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg>',(r=document.getElementById("ordersLink"))&&(r.href="orders.php?user_id=".concat(encodeURIComponent(n.uid))),S(n.uid),L=n,window.updateCreateButtonState&&window.updateCreateButtonState(),e.n=1,P();case 1:return e.a(2)}},e)}))).apply(this,arguments)}function S(e){return T.apply(this,arguments)}function T(){return(T=E(w().m(function e(n){var t,r,o,a,i;return w().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,fetch("check_admin.php?user_id=".concat(encodeURIComponent(n)));case 1:return t=e.v,e.n=2,t.json();case 2:e.v.is_admin&&(r=document.getElementById("userInfo"))&&!r.querySelector(".admin-link")&&((o=document.createElement("a")).href="admin.php?user_id=".concat(encodeURIComponent(n)),o.className="admin-link",o.style.cssText="background: #dc2626; color: white; padding: 6px 12px; border-radius: 6px; text-decoration: none; font-size: 12px; margin-right: 8px;",o.textContent="Admin",(a=r.querySelector("#ordersLink"))?r.insertBefore(o,a):r.appendChild(o)),e.n=4;break;case 3:e.p=3,i=e.v,console.log("Admin check failed:",i);case 4:return e.a(2)}},e,null,[[0,3]])}))).apply(this,arguments)}function B(){var e,n,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",o=t.toStringTag||"@@toStringTag";function a(t,r,o,a){var c=r&&r.prototype instanceof s?r:s,l=Object.create(c.prototype);return M(l,"_invoke",function(t,r,o){var a,s,c,l=0,u=o||[],d=!1,p={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(n,t){return a=n,s=0,c=e,p.n=t,i}};function f(t,r){for(s=t,c=r,n=0;!d&&l&&!o&&n<u.length;n++){var o,a=u[n],f=p.p,m=a[2];t>3?(o=m===r)&&(c=a[(s=a[4])?5:(s=3,3)],a[4]=a[5]=e):a[0]<=f&&((o=t<2&&f<a[1])?(s=0,p.v=r,p.n=a[1]):f<m&&(o=t<3||a[0]>r||r>m)&&(a[4]=t,a[5]=r,p.n=m,s=0))}if(o||t>1)return i;throw d=!0,r}return function(o,u,m){if(l>1)throw TypeError("Generator is already running");for(d&&1===u&&f(u,m),s=u,c=m;(n=s<2?e:c)||!d;){a||(s?s<3?(s>1&&(p.n=-1),f(s,c)):p.n=c:p.v=c);try{if(l=2,a){if(s||(o="next"),n=a[o]){if(!(n=n.call(a,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,s<2&&(s=0)}else 1===s&&(n=a.return)&&n.call(a),s<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),s=1);a=e}else if((n=(d=p.n<0)?c:t.call(r,p))!==i)break}catch(n){a=e,s=1,c=n}finally{l=1}}return{value:n,done:d}}}(t,o,a),!0),l}var i={};function s(){}function c(){}function l(){}n=Object.getPrototypeOf;var u=[][r]?n(n([][r]())):(M(n={},r,function(){return this}),n),d=l.prototype=s.prototype=Object.create(u);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,M(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return c.prototype=l,M(d,"constructor",l),M(l,"constructor",c),c.displayName="GeneratorFunction",M(l,o,"GeneratorFunction"),M(d),M(d,o,"Generator"),M(d,r,function(){return this}),M(d,"toString",function(){return"[object Generator]"}),(B=function(){return{w:a,m:p}})()}function M(e,n,t,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}M=function(e,n,t,r){function a(n,t){M(e,n,function(e){return this._invoke(n,t,e)})}n?o?o(e,n,{value:t,enumerable:!r,configurable:!r,writable:!r}):e[n]=t:(a("next",0),a("throw",1),a("return",2))},M(e,n,t,r)}function _(e,n,t,r,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void t(e)}s.done?n(c):Promise.resolve(c).then(r,o)}function j(e){return function(){var n=this,t=arguments;return new Promise(function(r,o){var a=e.apply(n,t);function i(e){_(a,r,o,i,s,"next",e)}function s(e){_(a,r,o,i,s,"throw",e)}i(void 0)})}}function A(e){return z.apply(this,arguments)}function z(){return(z=j(B().m(function e(n){var t,r,o;return B().w(function(e){for(;;)switch(e.p=e.n){case 0:return t=new URLSearchParams({size:"512x512",margin:"1",data:n}),e.p=1,e.n=2,fetch("https://api.qrserver.com/v1/create-qr-code/?".concat(t));case 2:if((r=e.v).ok){e.n=3;break}throw new Error("QR service error");case 3:return e.n=4,r.blob();case 4:return e.a(2,e.v);case 5:throw e.p=5,o=e.v,console.error("QR generation failed:",o),new Error("Failed to generate QR code");case 6:return e.a(2)}},e,null,[[1,5]])}))).apply(this,arguments)}function W(e,n){return F.apply(this,arguments)}function F(){return F=j(B().m(function e(n,t){var r,o,a,i,s,c=arguments;return B().w(function(e){for(;;)switch(e.p=e.n){case 0:return r=c.length>2&&void 0!==c[2]?c[2]:"waveforms",e.p=1,o=(0,f.KR)(b,"".concat(r,"/").concat(t)),e.n=2,(0,f.D)(o,n);case 2:return a=e.v,e.n=3,(0,f.qk)(a.ref);case 3:return i=e.v,e.a(2,i);case 4:if(e.p=4,s=e.v,console.error("Firebase Storage upload failed:",s),"storage/unauthorized"!==s.code){e.n=5;break}throw new Error("Permission denied. Please check Firebase Storage rules allow authenticated uploads.");case 5:if("storage/unauthenticated"!==s.code){e.n=6;break}throw new Error("Authentication required. Please sign in first.");case 6:if("storage/quota-exceeded"!==s.code){e.n=7;break}throw new Error("Storage quota exceeded. Please contact administrator.");case 7:if("storage/invalid-format"!==s.code){e.n=8;break}throw new Error("Invalid file format. Only PNG images are supported.");case 8:throw new Error("Firebase Storage error: ".concat(s.message));case 9:return e.a(2)}},e,null,[[1,4]])})),F.apply(this,arguments)}function q(){return q=j(B().m(function e(n,t,r){var o,a,i,s,c,l,u,d,p,f,m,v,g=arguments;return B().w(function(e){for(;;)switch(e.p=e.n){case 0:if(o=g.length>3&&void 0!==g[3]?g[3]:null,e.p=1,a=Date.now(),i=t.replace(/\.[^.]+$/,""),s="".concat(r,"_").concat(a,"_").concat(i,"_waveform.png"),c="".concat(r,"_").concat(a,"_").concat(i,"_qr.png"),l=null,!n){e.n=3;break}return e.n=2,W(n,s,"waveforms");case 2:l=e.v;case 3:if(u=null,d=null,!o){e.n=5;break}return p="".concat(r,"_").concat(a,"_").concat(i,"_audio.").concat(o.name.split(".").pop()),e.n=4,W(o,p,"audio");case 4:u=e.v;case 5:return d="".concat(window.location.origin,"/Wavemy/play.php?id=TEMP_ID"),e.n=6,A(d);case 6:return f=e.v,e.n=7,W(f,c,"qr-codes");case 7:return m=e.v,e.a(2,{waveformUrl:l,qrUrl:m,audioUrl:u,playPageUrl:d,success:!0});case 8:return e.p=8,v=e.v,console.error("Upload process failed:",v),e.a(2,{error:v.message,success:!1})}},e,null,[[1,8]])})),q.apply(this,arguments)}function H(e){return R.apply(this,arguments)}function R(){return(R=j(B().m(function e(n){var t,r;return B().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,t=(0,f.KR)(b,n),e.n=1,(0,f.XR)(t);case 1:return e.a(2,!0);case 2:if(e.p=2,r=e.v,console.error("‚ùå Failed to delete from Firebase Storage:",r),"storage/object-not-found"!==r.code){e.n=3;break}return e.a(2,!0);case 3:return e.a(2,!1)}},e,null,[[0,2]])}))).apply(this,arguments)}function G(){return(G=j(B().m(function e(n,t){var r,o,a,i,s,c;return B().w(function(e){for(;;)switch(e.p=e.n){case 0:if(r=[],e.p=1,!n||!n.includes("firebasestorage.googleapis.com")){e.n=3;break}if(!(o=U(n))){e.n=3;break}return e.n=2,H(o);case 2:a=e.v,r.push({type:"image",path:o,success:a});case 3:if(!t||!t.includes("firebasestorage.googleapis.com")){e.n=5;break}if(!(i=U(t))){e.n=5;break}return e.n=4,H(i);case 4:s=e.v,r.push({type:"audio",path:i,success:s});case 5:return e.a(2,{success:!0,results:r});case 6:return e.p=6,c=e.v,console.error("Error deleting memory files:",c),e.a(2,{success:!1,error:c.message,results:r})}},e,null,[[1,6]])}))).apply(this,arguments)}function U(e){try{var n=e.match(/\/o\/([^?]+)/);return n?decodeURIComponent(n[1]):null}catch(e){return console.error("Error extracting storage path:",e),null}}function N(e){var n,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3,o=(document.querySelectorAll(".toast"),(n=document.getElementById("toast-container"))||((n=document.createElement("div")).id="toast-container",n.style.cssText="\n      position: fixed;\n      top: 20px;\n      right: 20px;\n      z-index: 10000;\n      pointer-events: none;\n    ",n.addEventListener("click",function(e){e.target.closest(".toast")&&(e.target.closest(".toast").style.pointerEvents="auto")}),n.style.pointerEvents="none",n.querySelectorAll(".toast").forEach(function(e){e.style.pointerEvents="auto"}),document.body.appendChild(n)),n),a=document.createElement("div");a.className="toast toast-".concat(t);var i={success:{bg:"#10b981",icon:"‚úì"},error:{bg:"#ef4444",icon:"‚úï"},warning:{bg:"#f59e0b",icon:"‚ö†"},info:{bg:"#3b82f6",icon:"‚Ñπ"}},s=i[t]||i.info;return a.innerHTML='\n    <div class="toast-content">\n      <span class="toast-icon">'.concat(s.icon,'</span>\n      <span class="toast-message">').concat(e,'</span>\n      <button class="toast-close" onclick="this.parentElement.parentElement.remove()">√ó</button>\n    </div>\n  '),a.style.cssText="\n    background: ".concat(s.bg,";\n    color: white;\n    padding: 12px 16px;\n    border-radius: 8px;\n    margin-bottom: 8px;\n    box-shadow: 0 4px 12px rgba(0,0,0,0.15);\n    opacity: 0;\n    transform: translateX(100%);\n    transition: all 0.3s ease;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    max-width: 400px;\n    word-wrap: break-word;\n  "),a.querySelector(".toast-content").style.cssText="\n    display: flex;\n    align-items: center;\n    gap: 8px;\n    flex: 1;\n  ",a.querySelector(".toast-close").style.cssText="\n    background: none;\n    border: none;\n    color: white;\n    cursor: pointer;\n    font-size: 18px;\n    padding: 0;\n    margin-left: 12px;\n    opacity: 0.8;\n  ",a.querySelector(".toast-close").addEventListener("mouseenter",function(e){e.target.style.opacity="1"}),a.querySelector(".toast-close").addEventListener("mouseleave",function(e){e.target.style.opacity="0.8"}),o.appendChild(a),requestAnimationFrame(function(){a.style.opacity="1",a.style.transform="translateX(0)"}),r>0&&setTimeout(function(){a&&a.parentNode&&(a.style.opacity="0",a.style.transform="translateX(100%)",setTimeout(function(){a&&a.parentNode&&a.remove()},300))},r),a}function D(){if(!document.getElementById("utils-styles")){var e=document.createElement("style");e.id="utils-styles",e.textContent="\n      @keyframes spin {\n        to { transform: rotate(360deg); }\n      }\n      \n      .loading {\n        position: relative;\n        opacity: 0.7;\n        pointer-events: none;\n      }\n    ",document.head.appendChild(e)}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",D):D(),document.addEventListener("DOMContentLoaded",function(){var e;e=O(),(0,d.hg)(h,function(e){e?function(e){C.apply(this,arguments)}(e):function(){var e=O();e.authModal.classList.remove("hidden"),e.authModal.style.display="",e.authModal.style.visibility="",e.mainContent.classList.add("page-disabled"),e.mainContent.style.filter="",e.mainContent.style.opacity="",e.mainContent.style.pointerEvents="",e.userInfo.classList.add("hidden"),e.btnCreate.disabled=!0,e.btnLogin.disabled=!1,e.btnLogin.innerHTML='\n    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">\n      <path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>\n      <path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>\n      <path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>\n      <path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>\n    </svg>\n    Sign in with Google\n  ';var n=document.getElementById("waveformsList");n&&n.classList.add("hidden")}()}),e.btnLogin.addEventListener("click",E(w().m(function n(){var t;return w().w(function(n){for(;;)switch(n.p=n.n){case 0:return n.p=0,e.btnLogin.disabled=!0,e.btnLogin.textContent="Signing in...",n.n=1,(0,d.df)(h,y);case 1:n.v,n.n=3;break;case 2:n.p=2,t=n.v,console.error("Login failed:",t),alert("Login failed: "+t.message),e.btnLogin.disabled=!1,e.btnLogin.innerHTML='\n        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">\n          <path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>\n          <path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>\n          <path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>\n          <path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>\n        </svg>\n        Sign in with Google\n      ';case 3:return n.a(2)}},n,null,[[0,2]])}))),e.btnLogout.addEventListener("click",E(w().m(function e(){var n;return w().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,(0,d.CI)(h);case 1:e.n=3;break;case 2:e.p=2,n=e.v,console.error("Logout failed:",n);case 3:return e.a(2)}},e,null,[[0,2]])}))),e.btnEmailLogin.addEventListener("click",E(w().m(function n(){var t,r,o,a;return w().w(function(n){for(;;)switch(n.p=n.n){case 0:if(n.p=0,t=e.emailInput.value.trim(),r=e.passwordInput.value,t&&r){n.n=1;break}return alert("Please enter both email and password"),n.a(2);case 1:return e.btnEmailLogin.disabled=!0,e.btnEmailLogin.textContent="Signing in...",n.n=2,(0,d.x9)(h,t,r);case 2:n.n=4;break;case 3:n.p=3,a=n.v,console.error("Email login failed:",a),o="Login failed","auth/user-not-found"===a.code?o="No account found with this email":"auth/wrong-password"===a.code?o="Incorrect password":"auth/invalid-email"===a.code?o="Invalid email address":"auth/too-many-requests"===a.code&&(o="Too many failed attempts. Please try again later"),alert(o),e.btnEmailLogin.disabled=!1,e.btnEmailLogin.textContent="Sign In";case 4:return n.a(2)}},n,null,[[0,3]])}))),e.btnEmailRegister.addEventListener("click",E(w().m(function n(){var t,r,o,a;return w().w(function(n){for(;;)switch(n.p=n.n){case 0:if(n.p=0,t=e.emailInput.value.trim(),r=e.passwordInput.value,t&&r){n.n=1;break}return alert("Please enter both email and password"),n.a(2);case 1:if(!(r.length<6)){n.n=2;break}return alert("Password must be at least 6 characters long"),n.a(2);case 2:return e.btnEmailRegister.disabled=!0,e.btnEmailRegister.textContent="Creating account...",n.n=3,(0,d.eJ)(h,t,r);case 3:n.n=5;break;case 4:n.p=4,a=n.v,console.error("Email registration failed:",a),o="Registration failed","auth/email-already-in-use"===a.code?o="An account with this email already exists":"auth/invalid-email"===a.code?o="Invalid email address":"auth/weak-password"===a.code&&(o="Password is too weak. Please choose a stronger password"),alert(o),e.btnEmailRegister.disabled=!1,e.btnEmailRegister.textContent="Register";case 5:return n.a(2)}},n,null,[[0,4]])}))),e.passwordInput.addEventListener("keypress",function(n){"Enter"===n.key&&e.btnEmailLogin.click()})}),window.getCurrentUser=function(){return L},window.uploadWaveformFiles=function(e,n,t){return q.apply(this,arguments)},window.deleteMemoryFiles=function(e,n){return G.apply(this,arguments)},window.showToast=N,window.showLoading=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Loading...";if(e&&(e.classList.add("loading"),e.dataset.originalText=e.textContent,e.textContent=n,e.disabled=!0,!e.querySelector(".loading-spinner"))){var t=document.createElement("span");t.className="loading-spinner",t.style.cssText="\n      display: inline-block;\n      width: 14px;\n      height: 14px;\n      border: 2px solid rgba(255,255,255,0.3);\n      border-top: 2px solid white;\n      border-radius: 50%;\n      animation: spin 1s linear infinite;\n      margin-right: 8px;\n    ",e.prepend(t)}},window.hideLoading=function(e){if(e){e.classList.remove("loading"),e.disabled=!1;var n=e.querySelector(".loading-spinner");n&&n.remove(),e.dataset.originalText&&(e.textContent=e.dataset.originalText,delete e.dataset.originalText)}},window.showConfirmDialog=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Confirm Action";return new Promise(function(t){var r=document.createElement("div");r.className="confirm-overlay",r.style.cssText="\n      position: fixed;\n      top: 0;\n      left: 0;\n      right: 0;\n      bottom: 0;\n      background: rgba(0,0,0,0.6);\n      backdrop-filter: blur(4px);\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      z-index: 10001;\n      opacity: 0;\n      transition: opacity 0.3s ease;\n    ";var o=document.createElement("div");o.className="confirm-dialog",o.style.cssText="\n      background: white;\n      padding: 24px;\n      border-radius: 12px;\n      max-width: 400px;\n      width: 90%;\n      text-align: center;\n      box-shadow: 0 20px 40px rgba(0,0,0,0.2);\n      transform: scale(0.9);\n      transition: transform 0.3s ease;\n    ",o.innerHTML='\n      <h3 style="margin: 0 0 16px 0; color: #0b0d12; font-size: 18px;">'.concat(n,'</h3>\n      <p style="margin: 0 0 24px 0; color: #6b7280; line-height: 1.5;">').concat(e,'</p>\n      <div style="display: flex; gap: 12px; justify-content: center;">\n        <button id="confirm-cancel" style="background: #6b7280; color: white; border: none; padding: 10px 20px; border-radius: 6px; cursor: pointer;">\n          Cancel\n        </button>\n        <button id="confirm-ok" style="background: #ef4444; color: white; border: none; padding: 10px 20px; border-radius: 6px; cursor: pointer;">\n          Confirm\n        </button>\n      </div>\n    '),r.appendChild(o),document.body.appendChild(r),requestAnimationFrame(function(){r.style.opacity="1",o.style.transform="scale(1)"});var a=function(){r.style.opacity="0",o.style.transform="scale(0.9)",setTimeout(function(){return r.remove()},300)};o.querySelector("#confirm-cancel").addEventListener("click",function(){a(),t(!1)}),o.querySelector("#confirm-ok").addEventListener("click",function(){a(),t(!0)});var i=function(e){"Escape"===e.key&&(a(),t(!1),document.removeEventListener("keydown",i))};document.addEventListener("keydown",i),r.addEventListener("click",function(e){e.target===r&&(a(),t(!1))})})},window.handleError=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Unknown",t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(console.error("Error in ".concat(n,":"),e),"undefined"!=typeof gtag&&gtag("event","exception",{description:"".concat(n,": ").concat(e.message),fatal:!1}),t){var r=function(e,n){var t,r=(null===(t=e.message)||void 0===t?void 0:t.toLowerCase())||"";return r.includes("network")||r.includes("fetch")?"Unable to connect to the server. Please check your internet connection and try again.":r.includes("auth")||r.includes("permission")?"Authentication failed. Please sign in again.":n.includes("upload")||r.includes("file")?"File upload failed. Please check the file format and try again.":n.includes("payment")||r.includes("stripe")?"Payment processing failed. Please check your payment details and try again.":"Something went wrong. Please try again later."}(e,n);N(r,"error")}},window.formatFileSize=function(e){if(0===e)return"0 Bytes";var n=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,n)).toFixed(2))+" "+["Bytes","KB","MB","GB"][n]},window.validateFileType=function(e,n){return n.includes(e.type)},window.validateFileSize=function(e,n){return e.size<=n}}},t={};function r(e){var o=t[e];if(void 0!==o)return o.exports;var a=t[e]={exports:{}};return n[e](a,a.exports,r),a.exports}r.m=n,e=[],r.O=(n,t,o,a)=>{if(!t){var i=1/0;for(u=0;u<e.length;u++){for(var[t,o,a]=e[u],s=!0,c=0;c<t.length;c++)(!1&a||i>=a)&&Object.keys(r.O).every(e=>r.O[e](t[c]))?t.splice(c--,1):(s=!1,a<i&&(i=a));if(s){e.splice(u--,1);var l=o();void 0!==l&&(n=l)}}return n}a=a||0;for(var u=e.length;u>0&&e[u-1][2]>a;u--)e[u]=e[u-1];e[u]=[t,o,a]},r.d=(e,n)=>{for(var t in n)r.o(n,t)&&!r.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:n[t]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),(()=>{var e={792:0};r.O.j=n=>0===e[n];var n=(n,t)=>{var o,a,[i,s,c]=t,l=0;if(i.some(n=>0!==e[n])){for(o in s)r.o(s,o)&&(r.m[o]=s[o]);if(c)var u=c(r)}for(n&&n(t);l<i.length;l++)a=i[l],r.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return r.O(u)},t=self.webpackChunkwavemy=self.webpackChunkwavemy||[];t.forEach(n.bind(null,0)),t.push=n.bind(null,t.push.bind(t))})();var o=r.O(void 0,[96],()=>r(65));o=r.O(o)})();
//# sourceMappingURL=bundle.6e8b2edaab0d7cf176db.js.map